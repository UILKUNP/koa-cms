{"code":"!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&r&&\"string\"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\"a\",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=0)}([function(t,e,r){r(1)},function(t,e,r){\"use strict\";const n=r(2);t.exports=function(t,e){let r;return r=\"function\"==typeof e?new n({translate:e}):new n,t.context.verifyParams=function(t,e){if(t){e||(e=[\"GET\",\"HEAD\"].includes(this.method.toUpperCase())?this.request.query:this.request.body,e=Object.assign({},e,this.params));const n=r.validate(t,e);n&&this.throw(422,\"参数不完整！\",{code:\"INVALID_PARAM\",errors:n,params:e})}},async function(t,e){try{await e()}catch(e){if(\"INVALID_PARAM\"===e.code)return t.status=422,void(t.body={message:e.message,errors:e.errors,params:e.params});throw e}}}},function(t,e,r){\"use strict\";function n(t){return\"string\"==typeof t?{type:t}:Array.isArray(t)?{type:\"enum\",values:t}:t instanceof RegExp?{type:\"string\",format:t}:t||{}}function o(t,e){return\"number\"!=typeof e||0!=e%1?this.t(\"should be an integer\"):t.hasOwnProperty(\"max\")&&e>t.max?this.t(\"should smaller than %s\",t.max):t.hasOwnProperty(\"min\")&&e<t.min?this.t(\"should bigger than %s\",t.min):void 0}function i(t,e){if(\"string\"!=typeof e)return this.t(\"should be a string\");var r=t.hasOwnProperty(\"allowEmpty\")?t.allowEmpty:t.empty;return r||\"\"!==e?r&&\"\"===e?void 0:t.hasOwnProperty(\"max\")&&e.length>t.max?this.t(\"length should smaller than %s\",t.max):t.hasOwnProperty(\"min\")&&e.length<t.min?this.t(\"length should bigger than %s\",t.min):t.format&&!t.format.test(e)?t.message||this.t(\"should match %s\",t.format):void 0:this.t(\"should not be empty\")}function u(t,e){return i.call(this,{format:c,allowEmpty:t.allowEmpty},e)}function a(t,e){if(\"boolean\"!=typeof e)return this.t(\"should be a boolean\")}var s=r(3),l=/^\\d{4}\\-\\d{2}\\-\\d{2}$/,c=/^\\d{4}\\-\\d{2}\\-\\d{2} \\d{2}:\\d{2}:\\d{2}$/,f=/^\\d+$/,p=/^[a-z0-9\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+(?:\\.[a-z0-9\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+)*@(?:[a-z0-9](?:[a-z0-9\\-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9\\-]*[a-z0-9])?$/i,y=/^[\\w\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\_\\=\\+\\[\\]\\{\\}\\|\\;\\:\\'\\\"\\,\\<\\.\\>\\/\\?]+$/,h=/^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/i;class d{constructor(t){\"function\"==typeof(t=t||{}).translate&&(this.translate=t.translate),t.validateRoot&&(this.validateRoot=!0)}t(){var t=Array.prototype.slice.call(arguments);return\"function\"==typeof this.translate?this.translate.apply(this,t):s.format.apply(s,t)}validate(t,e){if(\"object\"!=typeof t)throw new TypeError(\"need object type rule\");if(this.validateRoot&&(\"object\"!=typeof e||!e))return[{message:this.t(\"the validated value should be a object\"),code:this.t(\"invalid\"),field:void 0}];var r=[];for(var o in t){var i=n(t[o]);if(e.hasOwnProperty(o)){var u=m[i.type];if(!u)throw new TypeError(\"rule type must be one of \"+Object.keys(m).join(\", \")+\", but the following type was passed: \"+i.type);var a=u.call(this,i,e[o],e);\"string\"==typeof a&&r.push({message:a,code:this.t(\"invalid\"),field:o}),Array.isArray(a)&&a.forEach((function(t){var e=\"object\"===i.type?\".\":\"\";t.field=o+e+t.field,r.push(t)}))}else!1!==i.required&&r.push({message:this.t(\"required\"),field:o,code:this.t(\"missing_field\")})}return r.length?r:void 0}}t.exports=d,d.prototype.addRule=d.addRule=function(t,e,r){if(!t)throw new TypeError(\"`type` required\");if(\"boolean\"!=typeof r&&(r=!0),!r&&m[t])throw new TypeError(\"rule `\"+t+\"` exists\");if(\"function\"!=typeof e){if(!(e instanceof RegExp))throw new TypeError(\"check must be function or regexp\");m[t]=function(t,r){return i.call(this,{format:e},r)}}else m[t]=e};var m=d.TYPE_MAP={number:function(t,e){return\"number\"!=typeof e||isNaN(e)?this.t(\"should be a number\"):t.hasOwnProperty(\"max\")&&e>t.max?this.t(\"should smaller than %s\",t.max):t.hasOwnProperty(\"min\")&&e<t.min?this.t(\"should bigger than %s\",t.min):void 0},int:o,integer:o,string:i,id:function(t,e){return i.call(this,{format:f,allowEmpty:t.allowEmpty},e)},date:function(t,e){return i.call(this,{format:l,allowEmpty:t.allowEmpty},e)},dateTime:u,datetime:u,boolean:a,bool:a,array:function(t,e){if(!Array.isArray(e))return this.t(\"should be an array\");if(t.hasOwnProperty(\"max\")&&e.length>t.max)return this.t(\"length should smaller than %s\",t.max);if(t.hasOwnProperty(\"min\")&&e.length<t.min)return this.t(\"length should bigger than %s\",t.min);if(t.itemType){var r=this,o=m[t.itemType];if(!o)throw new TypeError(\"rule type must be one of \"+Object.keys(m).join(\", \")+\", but the following type was passed: \"+t.itemType);var i=[],u=\"object\"===t.itemType?t:t.rule||n.call(r,t.itemType);return e.forEach((function(t,e){var n=\"[\"+e+\"]\",a=o.call(r,u,t);\"string\"==typeof a&&i.push({field:n,message:a,code:r.t(\"invalid\")}),Array.isArray(a)&&(i=i.concat(a.map((function(t){return t.field=n+\".\"+t.field,t.message=t.message,t}))))})),i}},object:function(t,e){return\"object\"==typeof e?t.rule?this.validate(t.rule,e):void 0:this.t(\"should be an object\")},enum:function(t,e){if(!Array.isArray(t.values))throw new TypeError(\"check enum need array type values\");return-1===t.values.indexOf(e)?this.t(\"should be one of %s\",t.values.join(\", \")):void 0},email:function(t,e){return i.call(this,{format:p,message:t.message||this.t(\"should be an email\"),allowEmpty:t.allowEmpty},e)},password:function(t,e,r){t.min||(t.min=6),t.format=y;var n=i.call(this,t,e);return n||(t.compare&&r[t.compare]!==e?this.t(\"should equal to %s\",t.compare):void 0)},url:function(t,e){return i.call(this,{format:h,message:t.message||this.t(\"should be a url\"),allowEmpty:t.allowEmpty},e)}}},function(t,e,r){(function(t){function n(t,r){var n={seen:[],stylize:i};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&e._extend(n,r),d(n.showHidden)&&(n.showHidden=!1),d(n.depth)&&(n.depth=2),d(n.colors)&&(n.colors=!1),d(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=n.styles[e];return r?\"\u001b[\"+n.colors[r][0]+\"m\"+t+\"\u001b[\"+n.colors[r][1]+\"m\":t}function i(t){return t}function u(t,r,n){if(t.customInspect&&r&&w(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return h(o)||(o=u(t,o,n)),o}var i=a(t,r);if(i)return i;var f=Object.keys(r),p=function(t){var e={};return t.forEach((function(t){e[t]=!0})),e}(f);if(t.showHidden&&(f=Object.getOwnPropertyNames(r)),v(r)&&(0<=f.indexOf(\"message\")||0<=f.indexOf(\"description\")))return s(r);if(0===f.length){if(w(r)){var y=r.name?\": \"+r.name:\"\";return t.stylize(\"[Function\"+y+\"]\",\"special\")}if(m(r))return t.stylize(RegExp.prototype.toString.call(r),\"regexp\");if(b(r))return t.stylize(Date.prototype.toString.call(r),\"date\");if(v(r))return s(r)}var d,g=\"\",O=!1,j=[\"{\",\"}\"];(c(r)&&(O=!0,j=[\"[\",\"]\"]),w(r))&&(g=\" [Function\"+(r.name?\": \"+r.name:\"\")+\"]\");return m(r)&&(g=\" \"+RegExp.prototype.toString.call(r)),b(r)&&(g=\" \"+Date.prototype.toUTCString.call(r)),v(r)&&(g=\" \"+s(r)),0!==f.length||O&&0!=r.length?0>n?m(r)?t.stylize(RegExp.prototype.toString.call(r),\"regexp\"):t.stylize(\"[Object]\",\"special\"):(t.seen.push(r),d=O?function(t,e,r,n,o){for(var i=[],u=0,a=e.length;u<a;++u)x(e,u+\"\")?i.push(l(t,e,r,n,u+\"\",!0)):i.push(\"\");return o.forEach((function(o){o.match(/^\\d+$/)||i.push(l(t,e,r,n,o,!0))})),i}(t,r,n,p,f):f.map((function(e){return l(t,r,n,p,e,O)})),t.seen.pop(),function(t,e,r){return 60<t.reduce((function(t,e){return 0<=e.indexOf(\"\\n\")&&0,t+e.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1}),0)?r[0]+(\"\"===e?\"\":e+\"\\n \")+\" \"+t.join(\",\\n  \")+\" \"+r[1]:r[0]+e+\" \"+t.join(\", \")+\" \"+r[1]}(d,g,j)):j[0]+g+j[1]}function a(t,e){if(d(e))return t.stylize(\"undefined\",\"undefined\");if(h(e)){var r=\"'\"+JSON.stringify(e).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return t.stylize(r,\"string\")}return y(e)?t.stylize(\"\"+e,\"number\"):f(e)?t.stylize(\"\"+e,\"boolean\"):p(e)?t.stylize(\"null\",\"null\"):void 0}function s(t){return\"[\"+Error.prototype.toString.call(t)+\"]\"}function l(t,e,r,n,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?s=l.set?t.stylize(\"[Getter/Setter]\",\"special\"):t.stylize(\"[Getter]\",\"special\"):l.set&&(s=t.stylize(\"[Setter]\",\"special\")),x(n,o)||(a=\"[\"+o+\"]\"),s||(0>t.seen.indexOf(l.value)?-1<(s=p(r)?u(t,l.value,null):u(t,l.value,r-1)).indexOf(\"\\n\")&&(s=i?s.split(\"\\n\").map((function(t){return\"  \"+t})).join(\"\\n\").substr(2):\"\\n\"+s.split(\"\\n\").map((function(t){return\"   \"+t})).join(\"\\n\")):s=t.stylize(\"[Circular]\",\"special\")),d(a)){if(i&&o.match(/^\\d+$/))return s;(a=JSON.stringify(\"\"+o)).match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,\"name\")):(a=a.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),a=t.stylize(a,\"string\"))}return a+\": \"+s}function c(t){return Array.isArray(t)}function f(t){return\"boolean\"==typeof t}function p(t){return null===t}function y(t){return\"number\"==typeof t}function h(t){return\"string\"==typeof t}function d(t){return void 0===t}function m(t){return g(t)&&\"[object RegExp]\"===O(t)}function g(t){return\"object\"==typeof t&&null!==t}function b(t){return g(t)&&\"[object Date]\"===O(t)}function v(t){return g(t)&&(\"[object Error]\"===O(t)||t instanceof Error)}function w(t){return\"function\"==typeof t}function O(t){return Object.prototype.toString.call(t)}function j(t){return 10>t?\"0\"+t.toString(10):t.toString(10)}function E(){var t=new Date,e=[j(t.getHours()),j(t.getMinutes()),j(t.getSeconds())].join(\":\");return[t.getDate(),_[t.getMonth()],e].join(\" \")}function x(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){if(!t){var r=new Error(\"Promise was rejected with a falsy value\");r.reason=t,t=r}return e(t)}var P=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},z=/%[sdj%]/g;e.format=function(t){if(!h(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(n(arguments[r]));return e.join(\" \")}r=1;for(var o=arguments,i=o.length,u=(t+\"\").replace(z,(function(t){if(\"%%\"===t)return\"%\";if(r>=i)return t;switch(t){case\"%s\":return o[r++]+\"\";case\"%d\":return+o[r++];case\"%j\":try{return JSON.stringify(o[r++])}catch(t){return\"[Circular]\"}default:return t}})),a=o[r];r<i;a=o[++r])u+=p(a)||!g(a)?\" \"+a:\" \"+n(a);return u},e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var A,S={};e.debuglog=function(r){if(d(A)&&(A=t.env.NODE_DEBUG||\"\"),r=r.toUpperCase(),!S[r])if(new RegExp(\"\\\\b\"+r+\"\\\\b\",\"i\").test(A)){var n=t.pid;S[r]=function(){var t=e.format.apply(e,arguments);console.error(\"%s %d: %s\",r,n,t)}}else S[r]=function(){};return S[r]},e.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:\"cyan\",number:\"yellow\",boolean:\"yellow\",undefined:\"grey\",null:\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"},e.isArray=c,e.isBoolean=f,e.isNull=p,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=h,e.isSymbol=function(t){return\"symbol\"==typeof t},e.isUndefined=d,e.isRegExp=m,e.isObject=g,e.isDate=b,e.isError=v,e.isFunction=w,e.isPrimitive=function(t){return null===t||\"boolean\"==typeof t||\"number\"==typeof t||\"string\"==typeof t||\"symbol\"==typeof t||void 0===t},e.isBuffer=r(5);var _=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];e.log=function(){console.log(\"%s - %s\",E(),e.format.apply(e,arguments))},e.inherits=r(6),e._extend=function(t,e){if(!e||!g(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var D=\"undefined\"==typeof Symbol?void 0:Symbol(\"util.promisify.custom\");e.promisify=function(t){function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,o)}catch(t){r(t)}return n}if(\"function\"!=typeof t)throw new TypeError('The \"original\" argument must be of type Function');if(D&&t[D]){var e;if(\"function\"!=typeof(e=t[D]))throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');return Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),D&&Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,P(t))},e.promisify.custom=D,e.callbackify=function(e){function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if(\"function\"!=typeof o)throw new TypeError(\"The last argument must be of type Function\");var i=this,u=function(){return o.apply(i,arguments)};e.apply(this,r).then((function(e){t.nextTick(u,null,e)}),(function(e){t.nextTick(T,e,u)}))}if(\"function\"!=typeof e)throw new TypeError('The \"original\" argument must be of type Function');return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,P(e)),r}}).call(this,r(4))},function(t){function e(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function n(t){if(s===setTimeout)return setTimeout(t,0);if((s===e||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}function o(){y&&f&&(y=!1,f.length?p=f.concat(p):h=-1,p.length&&i())}function i(){if(!y){var t=n(o);y=!0;for(var e=p.length;e;){for(f=p,p=[];++h<e;)f&&f[h].run();h=-1,e=p.length}f=null,y=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function a(){}var s,l,c=t.exports={};!function(){try{s=\"function\"==typeof setTimeout?setTimeout:e}catch(t){s=e}try{l=\"function\"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var f,p=[],y=!1,h=-1;c.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];p.push(new u(t,e)),1!==p.length||y||n(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},c.title=\"browser\",c.browser=!0,c.env={},c.argv=[],c.version=\"\",c.versions={},c.on=a,c.addListener=a,c.once=a,c.off=a,c.removeListener=a,c.removeAllListeners=a,c.emit=a,c.prependListener=a,c.prependOnceListener=a,c.listeners=function(){return[]},c.binding=function(){throw new Error(\"process.binding is not supported\")},c.cwd=function(){return\"/\"},c.chdir=function(){throw new Error(\"process.chdir is not supported\")},c.umask=function(){return 0}},function(t){t.exports=function(t){return t&&\"object\"==typeof t&&\"function\"==typeof t.copy&&\"function\"==typeof t.fill&&\"function\"==typeof t.readUInt8}},function(t){t.exports=\"function\"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}}]);","extractedComments":[]}